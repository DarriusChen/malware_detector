// loadScript('jquery.MultiFile.min.js')
// loadScript('jquery.MultiFile.js')
//import MultiFile from './jQuery.MultiFile.js'

$(function(){
    $("#submitBtn").on("click",function(){
        var file = $('#fileInput')[0].files;
        if(file.length <= 0){
            return alert('Please choose a file');
        }

        var formData = new FormData();
        //formData.append('file',file[0]); //看要取第幾個file (ex:file[0])
        for(var i =0; i<file.length;i++){
            formData.append('file',file[i]);
        }

        //var formData = new FormData($('#uploadForm')[0]); //另一種寫法

        $.ajax({
            type:"post",
            url: "http://localhost:9453/upload",
            data: formData,
            contentType:false,
            processData: false,
            success: function(response){
                if(response.msg != "" && response.msg != null){ //後端
                    alert(response.msg);
                }else{//上傳成功
                    alert("success");
                    // window.location.href = "http://localhost:3000/result.html";
                    $('#rtext').show();
                    $("#rgraph").attr("src", "assets/img/p_result_img" + response.pic);
                    $('#rgraph').show();
                $("input[type=file].multi").MultiFile('reset');
                }
            },
            error: function(){
                alert("upload failed!");
            }
        })
    })
})